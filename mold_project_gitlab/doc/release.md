# Release Howto
## Versioning
Mold version number consists of 3 parts `Major.Minor.Patch` 
The version number gets generated by the buildscripts executed by the gitlab-ci-runner. The patch part will always be the project specific pipeline ID `CI_PIPELINE_IID`
## Release builds
Release builds get triggered when creating a tag. The tag musst have the following syntax `v<Major>-<Minor>` for example v3-1. The build scripts will prase the tag name and apend the pipeline id to create the version. For example 3.1.5236.

A release pipeline looks like this https://gitlab.linkbit.io:20443/linkbit/mold/pipelines/12201 

The pipeline automatically creates und uploads images to the FTP server for:
*  probeview (with/without gsm)
*  umidus (with/without gsm)
*  test umidus (with/without gsm)

Moreover update packages can be generated and uploaded to the webapi with following manual jobs
*  update_probeview (create & upload to probeview.com)
*  update_test_umidus (create & upload to testcloud.umidus.com)
*  update_umidus (create & upload to cloud.umidus.com)
* update_all (create & upload to all servers)

## CI builds
CI builds are triggered on each commit. The major and minor part of the generated version will alway be 0. For example: `0.0.5236` 

A CI pipeline looks like this https://gitlab.linkbit.io:20443/linkbit/mold/pipelines/12257

All deploy steps are manual jobs. There are jobs to create images. These images will not be uploaded to the FTP server, they are stored as gitlab artifacts for 3 days.
*  probeview (with/without gsm)
*  umidus (with/without gsm)
*  test umidus (with/without gsm)

Moreover update packages can be generated and uploaded to the webapi with following manual jobs
*  update_probeview (create & upload to probeview.com)
*  update_test_umidus (create & upload to testcloud.umidus.com)
*  update_umidus (create & upload to cloud.umidus.com)
* update_all (create & upload to all servers)